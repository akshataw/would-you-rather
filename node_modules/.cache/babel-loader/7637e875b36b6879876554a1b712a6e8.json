{"ast":null,"code":"import _classCallCheck from \"/home/akshata/would-you-rather/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/akshata/would-you-rather/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/akshata/would-you-rather/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/akshata/would-you-rather/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/akshata/would-you-rather/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/akshata/would-you-rather/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/akshata/would-you-rather/src/components/Details.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { handleAnswer } from '../actions/shared';\nimport NavBar from './NavBar';\nimport Posts from './Posts';\nimport ErrorPage from './ErrorPage';\n\nvar Details =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Details, _React$Component);\n\n  function Details(props) {\n    var _this;\n\n    _classCallCheck(this, Details);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Details).call(this, props));\n    _this.state = {\n      answer: _this.props.answer,\n      currentLocation: window.location.pathname\n    };\n    _this.changeMode = _this.changeMode.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Details, [{\n    key: \"changeMode\",\n    value: function changeMode(id) {\n      var _this$props = this.props,\n          question = _this$props.question,\n          dispatch = _this$props.dispatch,\n          auth = _this$props.auth;\n\n      if (!this.state.answer) {\n        if (id === 1) {\n          dispatch(handleAnswer(auth, question.id, 'optionOne'));\n          this.setState({\n            answer: 'optionOne'\n          });\n        } else {\n          dispatch(handleAnswer(auth, question.id, 'optionTwo'));\n          this.setState({\n            answer: 'optionTwo'\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          question = _this$props2.question,\n          auth = _this$props2.auth,\n          user = _this$props2.user,\n          total = _this$props2.total,\n          percentOne = _this$props2.percentOne,\n          percentTwo = _this$props2.percentTwo;\n      var answer = this.state.answer;\n\n      if (auth === null) {\n        return React.createElement(Redirect, {\n          to: {\n            pathname: '/loginpage',\n            state: {\n              referrer: this.state.currentLocation\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        });\n      }\n\n      if (!question) {\n        return React.createElement(ErrorPage, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        });\n      }\n\n      var classes;\n\n      if (answer) {\n        if (answer === 'optionOne') {\n          classes = ['opt option-one selected', 'opt option-two'];\n        } else if (answer === 'optionTwo') {\n          classes = ['opt option-one', 'opt option-two selected'];\n        }\n      } else {\n        classes = ['opt option-one', 'opt option-two'];\n      }\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"well well-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"well\",\n        style: pageStyles,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, question && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(Posts, {\n        userId: question.author,\n        time: question.timestamp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"question-set\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"options\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes[0],\n        onClick: function onClick() {\n          return _this2.changeMode(1);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, question.optionOne.text), React.createElement(\"div\", {\n        className: classes[1],\n        onClick: function onClick() {\n          return _this2.changeMode(2);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, question.optionTwo.text)), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }), answer && React.createElement(\"div\", {\n        className: \"progress\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"progress-bar progress-bar-success\",\n        role: \"progressbar\",\n        \"aria-valuemin\": \"0\",\n        \"aria-valuemax\": \"100\",\n        style: {\n          width: \"\".concat(percentOne, \"%\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"\".concat(percentOne, \"%\")), React.createElement(\"div\", {\n        className: \"progress-bar progress-bar-warning\",\n        role: \"progressbar\",\n        \"aria-valuemin\": \"0\",\n        \"aria-valuemax\": \"100\",\n        style: {\n          width: \"\".concat(percentTwo, \"%\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"\".concat(percentTwo, \"%\"))), answer && React.createElement(\"div\", {\n        className: \"total\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Total number of votes: \", total)))));\n    }\n  }]);\n\n  return Details;\n}(React.Component);\n\nvar pageStyles = {\n  background: \"#CCD1D1\",\n  border: \"2px solid #660099\",\n  borderRadius: \"8px\"\n};\n\nfunction mapStateToProps(_ref, _ref2) {\n  var auth = _ref.auth,\n      questions = _ref.questions,\n      users = _ref.users;\n  var match = _ref2.match;\n  var question = questions[match.params.question_id];\n  var answer, percentOne, percentTwo, total;\n\n  if (auth !== null) {\n    var answers = users[auth].answers;\n\n    if (answers.hasOwnProperty(question)) {\n      answer = answers[question.id];\n    }\n\n    total = question.optionOne.votes.length + question.optionTwo.votes.length;\n    percentOne = question.optionOne.votes.length / total * 100;\n    percentTwo = question.optionTwo.votes.length / total * 100;\n  }\n\n  return {\n    auth: auth,\n    question: question,\n    answer: answer,\n    total: total,\n    percentOne: percentOne,\n    percentTwo: percentTwo\n  };\n}\n\nexport default connect(mapStateToProps)(Details);","map":{"version":3,"sources":["/home/akshata/would-you-rather/src/components/Details.js"],"names":["React","connect","Redirect","handleAnswer","NavBar","Posts","ErrorPage","Details","props","state","answer","currentLocation","window","location","pathname","changeMode","bind","id","question","dispatch","auth","setState","user","total","percentOne","percentTwo","referrer","classes","pageStyles","author","timestamp","optionOne","text","optionTwo","width","Component","background","border","borderRadius","mapStateToProps","questions","users","match","params","question_id","answers","hasOwnProperty","votes","length"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { handleAnswer } from '../actions/shared';\nimport NavBar from './NavBar';\nimport Posts from './Posts';\nimport ErrorPage from './ErrorPage';\n\nclass Details extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      answer: this.props.answer,\n      currentLocation: window.location.pathname\n    }\n    this.changeMode = this.changeMode.bind(this)\n  }\n\n  changeMode(id){\n    const { question, dispatch, auth } = this.props\n    if(!this.state.answer){\n      if(id === 1){\n        dispatch(handleAnswer(auth, question.id, 'optionOne'))\n        this.setState({\n          answer: 'optionOne'\n        })\n      }\n       else{\n        dispatch(handleAnswer(auth, question.id, 'optionTwo'))\n        this.setState({\n          answer: 'optionTwo'\n         })\n      }\n    }\n  }\n\n  render(){\n    const { question, auth, user, total, percentOne, percentTwo } = this.props\n    const { answer } = this.state\n\n    if(auth === null){\n      return(\n        <Redirect to={{\n          pathname: '/loginpage',\n          state: { referrer: this.state.currentLocation }\n        }} />\n      )\n    }\n\n    if(!question){\n      return <ErrorPage />\n    }\n    let classes\n    if(answer){\n      if(answer === 'optionOne'){\n        classes = ['opt option-one selected', 'opt option-two']\n      }\n       else if(answer === 'optionTwo'){\n        classes = ['opt option-one', 'opt option-two selected']\n      }\n    }\n     else{\n      classes = ['opt option-one', 'opt option-two']\n    }\n    return(\n      <div className=\"container\">\n       <div className=\"well well-sm\">\n         <NavBar />\n       </div>\n       <br/>\n       <div className=\"well\" style={pageStyles}>\n        {question && (\n          <div>\n            <br/>\n            <Posts userId={question.author} time={question.timestamp} />\n            <div className=\"question-set\">\n              <div className=\"options\">\n                <div className={classes[0]} onClick={() => this.changeMode(1)}>{question.optionOne.text}</div>\n                <div className={classes[1]} onClick={() => this.changeMode(2)}>{question.optionTwo.text}</div>\n              </div>\n              <br/>\n              { answer && (\n                <div className=\"progress\">\n                  <div className=\"progress-bar progress-bar-success\" role=\"progressbar\" aria-valuemin=\"0\" aria-valuemax=\"100\" style={{ width: `${percentOne}%` }}>{`${percentOne}%`}</div>\n                  <div className=\"progress-bar progress-bar-warning\" role=\"progressbar\" aria-valuemin=\"0\" aria-valuemax=\"100\" style={{ width: `${percentTwo}%` }}>{`${percentTwo}%`}</div>\n                </div>\n              )}\n              { answer && (\n                <div className=\"total\">\n                  Total number of votes: {total}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst pageStyles = {\n  background: \"#CCD1D1\",\n  border: \"2px solid #660099\",\n  borderRadius: \"8px\",\n}\n\nfunction mapStateToProps({ auth, questions, users }, { match }){\n  let question = questions[match.params.question_id]\n  let answer, percentOne, percentTwo, total\n\n  if(auth !== null){\n    const answers = users[auth].answers\n\n    if(answers.hasOwnProperty(question)){\n      answer = answers[question.id]\n    }\n\n    total = question.optionOne.votes.length + question.optionTwo.votes.length\n    percentOne = (question.optionOne.votes.length / total) * 100\n    percentTwo = (question.optionTwo.votes.length / total) * 100\n  }\n\n  return {\n    auth,\n    question,\n    answer,\n    total,\n    percentOne,\n    percentTwo\n  }\n}\n\nexport default connect(mapStateToProps)(Details);\n"]},"metadata":{},"sourceType":"module"}